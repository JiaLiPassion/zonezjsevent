<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Player Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<iframe width="100%" height="100%" id="test-amazon-iframe"></iframe>
<script>
    window.history.pushState = null;
    var iframe = document.getElementById('test-amazon-iframe');
    var xhr = new XMLHttpRequest();
    xhr.onload = function (data) {
        var str = xhr.responseText;
        str = str.replace('<head>', '<head><base href="https://tplsites.s3.amazonaws.com/tlo_cw_test/bw4l/DSAO/">');
        //str = str.replace('<base href="/">', '<base href="http://localhost:4300/">');
        console.log(str);
        iframe.contentWindow.history.pushState = null;
        iframe.contentWindow.upConfig = {
            "alphabetPath": "",
            "activity": "",
            "baseHelpUrl": "",
            "celaCode": "",
            "celaUrl": "",
            "fontsUrl": "//tplsites.s3.amazonaws.com/webfonts/",
            "gaAccount": "UA-43029260-8",
            "goMobileAvailable": false,
            "hasShareableLink": true,
            "helpPlaceholders": [
                "web"
            ],
            "isHardMode": false,
            "isLessonGin": false,
            "isNative": false,
            "isTestingOutEnabled": true,
            "ldsUrl": "//lds.transparent.com/",
            "lessonUuid": "5ce1fed8-a16f-565b-8a4a-7cfacfbc050d",
            "locale": "en_US",
            "path": "unit1",
            "rootDataPath": '//tplsites.s3.amazonaws.com/courses/html5_courses/dsao_v3/SPAxxENGus/',
            "soundServer": "//sound.transparent.com/jsndcmp/sound/"
        };
        iframe.contentWindow.document.write(str);
    };

    xhr.open('GET', 'https://tplsites.s3.amazonaws.com/tlo_cw_test/bw4l/DSAO/UnitPlayer.html');
    //xhr.open('GET', 'http://localhost:4300/index.html');
    xhr.send(null);
</script>
</body>
</html>
